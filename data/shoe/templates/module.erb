<% if data? %>
require 'pathname'
require 'rbconfig'
require 'rbconfig/datadir'

<% end %>
module <%= module_name %>
  VERSION = '<%= version %>'
<% if application? || extension? %>

<% end %>
<% if application? %>
  autoload :Application, '<%= name %>/application'
<% end %>
<% if extension? %>
  autoload :<%= extension_module_name %>, '<%= name %>/<%= extension_name %>'
<% end %>
<% if data? %>

  def self.datadir
    @@datadir ||= begin
      datadir = RbConfig.datadir('<%= name %>')
      if !File.exist?(datadir)
        warn "#{datadir} does not exist. Trying again with data directory relative to __FILE__."
        datadir = File.expand_path('../../data/<%= name %>', __FILE__)
      end
      Pathname.new(datadir)
    end
  end
<% end %>
end
